<html>
	<head>
		<title>Word counter</title>
		<style type="text/css">
			#words {
				list-style-type: none;
			}
		</style>
	</head>
	<body>
		<textarea cols="80" rows="20"></textarea><br>
		<ul id="words">
		</ul>
		<script type="text/javascript">
			var text = document.getElementsByTagName('textarea')[0],
				out = document.getElementById('words');

			function toTitleCase(str){
			return str.replace(/\w\S*/g, function(txt){return txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase();});
			}

			var strip = function (text) {
				return toTitleCase(text.replace(/([\W_]|\t|\n|\t)+/g, ''));
			};

			var printOut = function (myObj) {
				out.innerHTML = "";
				var keys = Object.keys(myObj).sort(function(a,b){return myObj[b]-myObj[a]})

				for (var i = 0; i < keys.length; i++) {
					out.innerHTML += "<li>" + keys[i] + ": " + String(myObj[keys[i]]) + "</li>";
				};

			};

			text.oninput = function () {
				var t = text.value,
					c = {};

				t = t.split("\n")
				console.log(t)

				for (var i = 0; i < t.length; i++) {
					var line = t[i]
					var words = line.split(" ")
					for (var j = 0; j < words.length; j++) {
						if (strip(words[j])) {
							if (strip(words[j]) in c){
								c[strip(words[j])]++;
							} else {
								c[strip(words[j])] = 1;
							};
						};
					};
				};
				console.log(c);
				printOut(c);
			};



		</script>
	</body>
</html>